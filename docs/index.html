<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>spacemap - Documentation</title>
    <meta name="description" content="Disk space analyzer with terminal visualizations and JSON export">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            background: #f6f8fa;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 3rem;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: #24292e;
        }

        .subtitle {
            color: #586069;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        h2 {
            font-size: 1.75rem;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.3rem;
            border-bottom: 1px solid #eaecef;
        }

        h3 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }

        pre {
            background: #f6f8fa;
            border: 1px solid #d1d5da;
            border-radius: 6px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
            font-size: 0.9rem;
        }

        code {
            background: #f6f8fa;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
            font-size: 0.9em;
        }

        pre code {
            background: none;
            padding: 0;
        }

        a {
            color: #0366d6;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid #d1d5da;
        }

        th {
            background: #f6f8fa;
            font-weight: 600;
        }

        .note {
            background: #f1f8ff;
            border: 1px solid #c8e1ff;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .badges {
            margin: 1rem 0;
        }

        .badges img {
            margin-right: 0.5rem;
        }

        ul, ol {
            margin-left: 2rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        footer {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #eaecef;
            color: #586069;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>spacemap</h1>
        <p class="subtitle">Disk space analyzer with terminal visualizations</p>

        <div class="badges">
            <img src="https://img.shields.io/crates/v/spacemap.svg" alt="Version">
            <img src="https://img.shields.io/crates/d/spacemap.svg" alt="Downloads">
            <img src="https://img.shields.io/badge/license-MIT%2FApache--2.0-blue.svg" alt="License">
        </div>

        <h2>Installation</h2>

        <h3>From crates.io</h3>
        <pre><code>cargo install spacemap</code></pre>

        <h3>From GitHub Releases</h3>
        <p>Download pre-built binaries from <a href="https://github.com/chris-alexiuk/spacemap/releases">Releases</a>.</p>

        <h3>Build from source</h3>
        <pre><code>git clone https://github.com/chris-alexiuk/spacemap
cd spacemap
cargo build --release</code></pre>

        <h2>Basic Usage</h2>

        <pre><code># Scan current directory
spacemap

# Scan specific path
spacemap /path/to/directory

# Show top 20 largest files and directories
spacemap --verbose --top 20

# Get help
spacemap --help</code></pre>

        <h2>Categorization Modes</h2>

        <p>spacemap can categorize files in three different ways:</p>

        <h3>By file type (default)</h3>
        <pre><code>spacemap --by type</code></pre>
        <p>Groups files by extension into categories like Images, Videos, Code, etc.</p>

        <h3>By size</h3>
        <pre><code>spacemap --by size</code></pre>
        <p>Groups files into size buckets (0-1 KiB, 1-10 KiB, etc.).</p>

        <h3>By age</h3>
        <pre><code>spacemap --by age</code></pre>
        <p>Groups files by last modification time (0-7 days, 7-30 days, etc.).</p>

        <h2>Options</h2>

        <table>
            <tr>
                <th>Option</th>
                <th>Description</th>
            </tr>
            <tr>
                <td><code>--by &lt;MODE&gt;</code></td>
                <td>Categorization mode: type, size, or age</td>
            </tr>
            <tr>
                <td><code>-v, --verbose</code></td>
                <td>Show top N files and directories</td>
            </tr>
            <tr>
                <td><code>--top &lt;N&gt;</code></td>
                <td>Number of top items to show (default: 10)</td>
            </tr>
            <tr>
                <td><code>--max-depth &lt;N&gt;</code></td>
                <td>Maximum recursion depth</td>
            </tr>
            <tr>
                <td><code>--exclude &lt;PATTERN&gt;</code></td>
                <td>Exclude paths containing pattern</td>
            </tr>
            <tr>
                <td><code>--follow-symlinks</code></td>
                <td>Follow symbolic links</td>
            </tr>
            <tr>
                <td><code>--no-color</code></td>
                <td>Disable colored output</td>
            </tr>
            <tr>
                <td><code>--json</code></td>
                <td>Output JSON to stdout</td>
            </tr>
            <tr>
                <td><code>--output &lt;FILE&gt;</code></td>
                <td>Write JSON output to file</td>
            </tr>
        </table>

        <h2>Examples</h2>

        <h3>Exclude directories</h3>
        <pre><code>spacemap --exclude node_modules --exclude .git</code></pre>

        <h3>Limit recursion depth</h3>
        <pre><code>spacemap --max-depth 3</code></pre>

        <h3>Custom size buckets</h3>
        <pre><code>spacemap --by size --size-buckets "1024,10240,102400,1048576"</code></pre>
        <p>Comma-separated byte values for bucket boundaries.</p>

        <h3>Custom age buckets</h3>
        <pre><code>spacemap --by age --age-buckets "1,7,30,90,365"</code></pre>
        <p>Comma-separated day values for age boundaries.</p>

        <h3>JSON export</h3>
        <pre><code># To stdout
spacemap --json

# To file
spacemap --output report.json</code></pre>

        <h2>Output Format</h2>

        <p>Terminal output shows:</p>
        <ul>
            <li>Disk usage information</li>
            <li>Total files and directories scanned</li>
            <li>Category breakdown with size, percentage, and file count</li>
            <li>Visual bar chart of distribution</li>
            <li>Top N largest files (with --verbose)</li>
            <li>Top N largest directories (with --verbose)</li>
        </ul>

        <h2>File Type Categories</h2>

        <p>When using <code>--by type</code>, files are grouped into these categories:</p>

        <ul>
            <li><strong>Images:</strong> jpg, png, gif, svg, webp, ico, heic, etc.</li>
            <li><strong>Videos:</strong> mp4, avi, mkv, mov, webm, m4v, etc.</li>
            <li><strong>Audio:</strong> mp3, wav, flac, aac, ogg, m4a, etc.</li>
            <li><strong>Documents:</strong> pdf, doc, docx, txt, md, odt, etc.</li>
            <li><strong>Spreadsheets:</strong> xls, xlsx, csv, ods</li>
            <li><strong>Presentations:</strong> ppt, pptx, odp</li>
            <li><strong>Archives:</strong> zip, tar, gz, 7z, rar, etc.</li>
            <li><strong>Code:</strong> rs, py, js, ts, java, c, cpp, go, etc.</li>
            <li><strong>Config:</strong> json, xml, yaml, toml, ini, etc.</li>
            <li><strong>Binaries:</strong> exe, dll, so, bin, deb, rpm</li>
            <li><strong>Disk Images:</strong> iso, img, dmg, vdi, vmdk</li>
            <li><strong>Databases:</strong> db, sqlite, sql, mdb</li>
            <li><strong>Logs:</strong> log</li>
            <li><strong>Fonts:</strong> ttf, otf, woff, woff2</li>
            <li><strong>Other:</strong> everything else</li>
        </ul>

        <h2>JSON Schema</h2>

        <p>When using <code>--json</code> or <code>--output</code>, the output follows this structure:</p>

        <pre><code>{
  "scanned_path": "string",
  "mode": "type|size|age",
  "totals": {
    "total_bytes": 0,
    "file_count": 0,
    "dir_count": 0,
    "skipped_paths": 0
  },
  "disk_usage": {
    "total_space": 0,
    "available_space": 0,
    "used_space": 0,
    "used_percent": 0.0
  },
  "buckets": [
    {
      "key": "string",
      "label": "string",
      "bytes": 0,
      "percent": 0.0,
      "file_count": 0
    }
  ],
  "top_files": [
    { "path": "string", "bytes": 0 }
  ],
  "top_dirs": [
    { "path": "string", "bytes": 0 }
  ],
  "warnings": [
    { "path": "string", "error": "string" }
  ]
}</code></pre>

        <div class="note">
            <strong>Note:</strong> The <code>disk_usage</code> field may be <code>null</code> if disk information cannot be retrieved.
        </div>

        <h2>Exit Codes</h2>

        <table>
            <tr>
                <th>Code</th>
                <th>Meaning</th>
            </tr>
            <tr>
                <td>0</td>
                <td>Success</td>
            </tr>
            <tr>
                <td>1</td>
                <td>Scan completed with warnings (some paths unreadable)</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Invalid arguments</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Runtime failure</td>
            </tr>
        </table>

        <h2>License</h2>

        <p>Licensed under either of:</p>
        <ul>
            <li>Apache License, Version 2.0 (<a href="https://github.com/chris-alexiuk/spacemap/blob/main/LICENSE-APACHE">LICENSE-APACHE</a>)</li>
            <li>MIT license (<a href="https://github.com/chris-alexiuk/spacemap/blob/main/LICENSE-MIT">LICENSE-MIT</a>)</li>
        </ul>

        <footer>
            <p><a href="https://github.com/chris-alexiuk/spacemap">GitHub</a> | <a href="https://crates.io/crates/spacemap">crates.io</a></p>
        </footer>
    </div>
</body>
</html>
